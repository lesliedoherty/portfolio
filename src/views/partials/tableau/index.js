let nodes = [
{
  'node': {
    'nid': '79289',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-01-09',
    'level': 'Introductory',
    'startDate': '2018-01-09T11:00:00-08:00',
    'endDate': '2018-01-09T11:00:00-08:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79324',
    'language': 'en',
    'title': 'Guided Analytics',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/guided-analytics-global-live-web-training-adv-guided-analytics-2018-01-10',
    'level': 'Advanced',
    'startDate': '2018-01-10T11:00:00-08:00',
    'endDate': '2018-01-10T11:00:00-08:00',
    'trainingType': 'guided_analytics'
  }
}, {
  'node': {
    'nid': '79321',
    'language': 'en',
    'title': 'Data Blending',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/data-blending-global-live-web-training-adv-data-blending-2018-01-11',
    'level': 'Advanced',
    'startDate': '2018-01-11T11:00:00-08:00',
    'endDate': '2018-01-11T11:00:00-08:00',
    'trainingType': 'data_blending'
  }
}, {
  'node': {
    'nid': '79291',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-01-16',
    'level': 'Introductory',
    'startDate': '2018-01-16T11:00:00-08:00',
    'endDate': '2018-01-16T11:00:00-08:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79333',
    'language': 'en',
    'title': 'Tableau Server Administration & Utilization ',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/tableau-server-administration-utilization-global-live-web-training-2018-01-18',
    'level': 'Advanced',
    'startDate': '2018-01-18T11:00:00-08:00',
    'endDate': '2018-01-18T11:00:00-08:00',
    'trainingType': 'tableau_server_administration'
  }
}, {
  'node': {
    'nid': '79292',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-01-30',
    'level': 'Introductory',
    'startDate': '2018-01-30T11:00:00-08:00',
    'endDate': '2018-01-30T11:00:00-08:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79327',
    'language': 'en',
    'title': 'Mapping',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/mapping-global-live-web-training-adv-mapping-2018-01-31',
    'level': 'Advanced',
    'startDate': '2018-01-31T11:00:00-08:00',
    'endDate': '2018-01-31T11:00:00-08:00',
    'trainingType': 'mapping'
  }
}, {
  'node': {
    'nid': '79330',
    'language': 'en',
    'title': 'Statistics',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/statistics-global-live-web-training-adv-statistics-2018-02-01',
    'level': 'Advanced',
    'startDate': '2018-02-01T11:00:00-08:00',
    'endDate': '2018-02-01T11:00:00-08:00',
    'trainingType': 'statistics'
  }
}, {
  'node': {
    'nid': '79294',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-02-06',
    'level': 'Introductory',
    'startDate': '2018-02-06T11:00:00-08:00',
    'endDate': '2018-02-06T11:00:00-08:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79316',
    'language': 'en',
    'title': 'Calculations I',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/calculations-i-global-live-web-training-adv-calculations-i-2018-02-07',
    'level': 'Advanced',
    'startDate': '2018-02-07T11:00:00-08:00',
    'endDate': '2018-02-07T11:00:00-08:00',
    'trainingType': 'calculations_i'
  }
}, {
  'node': {
    'nid': '79319',
    'language': 'en',
    'title': 'Calculations II',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/calculations-ii-global-live-web-training-adv-calculations-ii-2018-02-08',
    'level': 'Advanced',
    'startDate': '2018-02-08T11:00:00-08:00',
    'endDate': '2018-02-08T11:00:00-08:00',
    'trainingType': 'calculations_i'
  }
}, {
  'node': {
    'nid': '79295',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-02-13',
    'level': 'Introductory',
    'startDate': '2018-02-13T11:00:00-08:00',
    'endDate': '2018-02-13T11:00:00-08:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79325',
    'language': 'en',
    'title': 'Guided Analytics',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/guided-analytics-global-live-web-training-adv-guided-analytics-2018-02-14',
    'level': 'Advanced',
    'startDate': '2018-02-14T11:00:00-08:00',
    'endDate': '2018-02-14T11:00:00-08:00',
    'trainingType': 'guided_analytics'
  }
}, {
  'node': {
    'nid': '79322',
    'language': 'en',
    'title': 'Data Blending',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/data-blending-global-live-web-training-adv-data-blending-2018-02-15',
    'level': 'Advanced',
    'startDate': '2018-02-15T11:00:00-08:00',
    'endDate': '2018-02-15T11:00:00-08:00',
    'trainingType': 'data_blending'
  }
}, {
  'node': {
    'nid': '79296',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-02-20',
    'level': 'Introductory',
    'startDate': '2018-02-20T11:00:00-08:00',
    'endDate': '2018-02-20T11:00:00-08:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79334',
    'language': 'en',
    'title': 'Tableau Server Administration & Utilization ',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/tableau-server-administration-utilization-global-live-web-training-2018-02-22',
    'level': 'Advanced',
    'startDate': '2018-02-22T11:00:00-08:00',
    'endDate': '2018-02-22T11:00:00-08:00',
    'trainingType': 'tableau_server_administration'
  }
}, {
  'node': {
    'nid': '79297',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-02-27',
    'level': 'Introductory',
    'startDate': '2018-02-27T11:00:00-08:00',
    'endDate': '2018-02-27T11:00:00-08:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79328',
    'language': 'en',
    'title': 'Mapping',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/mapping-global-live-web-training-adv-mapping-2018-02-28',
    'level': 'Advanced',
    'startDate': '2018-02-28T11:00:00-08:00',
    'endDate': '2018-02-28T11:00:00-08:00',
    'trainingType': 'mapping'
  }
}, {
  'node': {
    'nid': '79331',
    'language': 'en',
    'title': 'Statistics',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/statistics-global-live-web-training-adv-statistics-2018-03-01',
    'level': 'Advanced',
    'startDate': '2018-03-01T11:00:00-08:00',
    'endDate': '2018-03-01T11:00:00-08:00',
    'trainingType': 'statistics'
  }
}, {
  'node': {
    'nid': '79298',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-03-06',
    'level': 'Introductory',
    'startDate': '2018-03-06T11:00:00-08:00',
    'endDate': '2018-03-06T11:00:00-08:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79317',
    'language': 'en',
    'title': 'Calculations I',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/calculations-i-global-live-web-training-adv-calculations-i-2018-03-07',
    'level': 'Advanced',
    'startDate': '2018-03-07T11:00:00-08:00',
    'endDate': '2018-03-07T11:00:00-08:00',
    'trainingType': 'calculations_i'
  }
}, {
  'node': {
    'nid': '79320',
    'language': 'en',
    'title': 'Calculations II',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/calculations-ii-global-live-web-training-adv-calculations-ii-2018-03-08',
    'level': 'Advanced',
    'startDate': '2018-03-08T11:00:00-08:00',
    'endDate': '2018-03-08T11:00:00-08:00',
    'trainingType': 'calculations_i'
  }
}, {
  'node': {
    'nid': '79299',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-03-13',
    'level': 'Introductory',
    'startDate': '2018-03-13T11:00:00-07:00',
    'endDate': '2018-03-13T11:00:00-07:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79326',
    'language': 'en',
    'title': 'Guided Analytics',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/guided-analytics-global-live-web-training-adv-guided-analytics-2018-03-14',
    'level': 'Advanced',
    'startDate': '2018-03-14T11:00:00-07:00',
    'endDate': '2018-03-14T11:00:00-07:00',
    'trainingType': 'guided_analytics'
  }
}, {
  'node': {
    'nid': '79323',
    'language': 'en',
    'title': 'Data Blending',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/data-blending-global-live-web-training-adv-data-blending-2018-03-15',
    'level': 'Advanced',
    'startDate': '2018-03-15T11:00:00-07:00',
    'endDate': '2018-03-15T11:00:00-07:00',
    'trainingType': 'data_blending'
  }
}, {
  'node': {
    'nid': '79300',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-03-20',
    'level': 'Introductory',
    'startDate': '2018-03-20T11:00:00-07:00',
    'endDate': '2018-03-20T11:00:00-07:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79335',
    'language': 'en',
    'title': 'Tableau Server Administration & Utilization ',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/tableau-server-administration-utilization-global-live-web-training-2018-03-22',
    'level': 'Advanced',
    'startDate': '2018-03-22T11:00:00-07:00',
    'endDate': '2018-03-22T11:00:00-07:00',
    'trainingType': 'tableau_server_administration'
  }
}, {
  'node': {
    'nid': '79301',
    'language': 'en',
    'title': 'Getting Started',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/getting-started-global-live-web-training-intro-getting-started-2018-03-27',
    'level': 'Introductory',
    'startDate': '2018-03-27T11:00:00-07:00',
    'endDate': '2018-03-27T11:00:00-07:00',
    'trainingType': 'getting_started'
  }
}, {
  'node': {
    'nid': '79329',
    'language': 'en',
    'title': 'Mapping',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/mapping-global-live-web-training-adv-mapping-2018-03-28',
    'level': 'Advanced',
    'startDate': '2018-03-28T11:00:00-07:00',
    'endDate': '2018-03-28T11:00:00-07:00',
    'trainingType': 'mapping'
  }
}, {
  'node': {
    'nid': '79332',
    'language': 'en',
    'title': 'Statistics',
    'url': 'https://5171-tableau.pantheonsite.io/learn/live-training/statistics-global-live-web-training-adv-statistics-2018-03-29',
    'level': 'Advanced',
    'startDate': '2018-03-29T11:00:00-07:00',
    'endDate': '2018-03-29T11:00:00-07:00',
    'trainingType': 'statistics'
  }
}]
import moment from 'moment'
import _ from 'underscore'
export default {
  name: 'tableau',

  data: () => ({
    nodes: nodes,
    liveTrainingData: []
  }),
  methods: {
    sortDates: function (eventA, eventB) {
      // Sort dates asc using bubble sort
      // If the value is less than 0, event A is before event B.
      return eventA.date.valueOf() - eventB.date.valueOf();
    },

    formatDate: function (liveEvent) {
      var format = 'LLL z',
        formats = {}, // Customize formats per language. @todo implement this.
        siteLanguage = 'en-us'

      // Format our dates based on site language.
      moment.locale(siteLanguage);

      // Use the user's local timezone to convert the available dates.
      if (_.has(siteLanguage, formats)) {
        format = formats[siteLanguage];
      }

      liveEvent.formattedDate = moment(liveEvent.date).tz(moment.tz.guess()).format(format);

      return liveEvent;
    },
    extractEventData: function (nodes) {
      return {
        nid: nodes.node.nid,

        // Date: new Date(data.node.startDate)
        date: nodes.node.startDate
      }
    }
  },
  created: function () {
    let _this = this
    _this.liveTrainingData.splice(0)
    let liveEvents = nodes.map(_this.extractEventData)
    liveEvents.sort(_this.sortDates).map(_this.formatDate)
    // Can't assign an empty array initially because vue freaks out and
    // breaks data binding. So we need to assign an initial value here
    liveEvents.forEach(function (liveEvent) {
      _this.liveTrainingData.push(liveEvent)
    })
  }
}

